#!/usr/bin/env python3
import os

base_path = os.path.dirname(os.path.abspath(__file__))
parent_dir = os.path.abspath(os.path.join(base_path, ".."))

filenames = ['brokenMiru10.fasta', 'MT11contigs.msf', 'edge.fasta', 'CDC1551.fasta', 'H37Rv.fasta']

def diffTest(file1, file2):
    "Returns 0 or 1 based on if the files are the same or not."
    if os.system('diff '+ file1 + ' ' + file2) == 0:
        return 0
    else: 
        return 1

#for filename in filenames:
#    os.system('python ' + str(parent_dir) + '/MiruHero ' + str(base_path) + '/' + filename + ' -o '+str(filename).replace('.fasta', '').replace('.msf', ''))

final_check = 0
for filename in filenames:
    final_check += diffTest(parent_dir+'/output/'+str(filename).replace('.fasta', '').replace('.msf', '')+'.summary.tsv', base_path +'/'+str(filename).replace('.fasta', '').replace('.msf', '')+'-check')

if final_check != 0:
    print("Test failed.")
else:
    print("Test passed.")
